# 2차원 imos법

### 누적합과 비교

- 누적합
  - 입력을 다 받고, 전처리 한번 거친 후 [s, e]의 합을 구하는 것과 같은 쿼리를 빠르게 처리할 수 있다
  - **쿼리 도중 값 갱신이 일어나지 않는 경우에 사용**
- imos법
  - 각 쿼리가 구간 [s, e] 내의 값을 갱신 시키는 경우, 이를 매 쿼리마다 일일이 갱신하지 않고, 시작과 끝만 기록해두었다가 마지막에 한 번의 처리로 값을 시뮬레이팅 하는 방법

### 사각형에서의 imos법

- 방법
  1. 갱신되는 쿼리를 시작과 끝만 기록
  2. 가로 합 갱신
  3. 세로 합 갱신

- imos가 적용되지 않은 구간 값 갱신 예시
  1. [0, 0] 부터 [3, 3] 까지 1 증가 (N*M만큼 갱신을 해야함)  
     ![image-20210911223623524](/res/imos/image-20210911223623524.png)
- imos 구간 값 갱신 예시
  1. 시작 좌표, 끝 지점+1을 한 모서리 부분에 각 값을 기록  
     ![image-20210911223705381](/res/imos/image-20210911223705381.png)
  2. 1과 동일  
     ![image-20210911223839663](/res/imos/image-20210911223839663.png)
  3. 가로 쓸기  
     ![image-20210911223937018](/res/imos/image-20210911223937018.png)
  4. 세로 쓸기  
     ![image-20210911224010114](/res/imos/image-20210911224010114.png)

### 참고

[누적합의 확장, imos법](https://driip.me/65d9b58c-bf02-44bf-8fba-54d394ed21e0)

